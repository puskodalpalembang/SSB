<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <style>
    /* CSS untuk perangkat seluler dengan lebar layar kurang dari atau sama dengan 768px */
    @media (max-width: 768px) {
      body {
        font-size: 14px; /* Ukuran teks lebih kecil */
      }
      .container {
        padding: 20px; /* Ruang padding yang lebih kecil di dalam kontainer */
      }
      /* Atur lebar elemen input agar sesuai dengan layar seluler */
      input[type="text"], select[class="form-control"], textarea[class="form-control"] {
        width: 100%;
      }
    }

    /* CSS untuk mengatur konten ke tengah halaman */
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      text-align: center;
    }

    form {
      text-align: left;
    }

	  body {
  background-color: #f2f2f2; /* Set your desired background color */
  background-image: url('logo_srb.png'); /* Set the path to your background image */
  background-size: 100% auto; /* Cover the entire viewport */
  background-position: center; /* Center the background image */
  background-repeat: no-repeat; /* Do not repeat the background image */
  font-family: 'Arial', sans-serif; /* Set your desired font family */
  color: #333; /* Set your desired text color */
}

  </style>
	
  <title>Form Support Smart Patrol-SSB</title>
</head>
<body>
<section>
  <div class="container">
    <h5 style="color: blue;">Form Support Smart Patrol-SSB</h5>
    <br>
    <form>
      <div class="row">
        <div class="col-12">
          <div class="form-group">
            <label for="tanggal">Tanggal</label>
            <input type="text" class="form-control" name="tanggal" id="exampleFormControlInput2" readonly>
          </div>
          <div class="form-group">
            <label for="name">Nama</label>
            <input type="text" name="name" class="form-control" id="exampleFormControlInput1" placeholder="" required>
          </div>
          <div class="form-group">
            <label for="jabatan">Jabatan</label>
            <input type="text" class="form-control" name="jabatan" id="exampleFormControlInput1" placeholder="" required>
          </div>
          <div class="form-group">
  <label for="lokasi">Lokasi</label>
  <select class="form-control" name="lokasi" id="lokasiDropdown" onchange="showPosOptions()" required>
    <option value="" disabled selected hidden>Pilih Lokasi</option>
	<option value="Sektor 1">Sektor 1</option>
    <option value="Sektor 2">Sektor 2</option>
    <option value="Sektor 3">Sektor 3</option>
	<option value="Sektor 4">Sektor 4</option>
	<option value="Patroli">Patroli</option>
  </select>
</div>

<div class="form-group" id="posGroup" style="display: none;">
  <label for="pos">Pos</label>
  <select class="form-control" name="pos" id="posDropdown" required>
 
    <!-- Opsi Pos akan ditambahkan melalui JavaScript -->
  </select>
</div>

<script>
  function showPosOptions() {
    // Mendapatkan elemen dropdown Lokasi dan Pos
    var lokasiDropdown = document.getElementById("lokasiDropdown");
    var posDropdown = document.getElementById("posDropdown");

    // Mendapatkan nilai terpilih dari dropdown Lokasi
    var selectedLokasi = lokasiDropdown.value;

    // Mendapatkan elemen div Pos
    var posGroup = document.getElementById("posGroup");

    // Hapus semua opsi Pos sebelum menambahkan yang baru
    posDropdown.innerHTML = "";

    // Tambahkan opsi Pos berdasarkan nilai terpilih dari dropdown Lokasi
    switch (selectedLokasi) {
      case "Sektor 1":
        // Opsi untuk Lokasi 1
		posDropdown.add(new Option("Sektor 1", "Pilih Pos"));
        posDropdown.add(new Option("Flamboyan", "Flamboyan"));
        posDropdown.add(new Option("Gd. Handak Bungur", "Gd. Handak Bungur"));
		posDropdown.add(new Option("Gunung Kembang", "Gunung Kembang"));
		posDropdown.add(new Option("Jene", "Jene"));
		posDropdown.add(new Option("Koneng", "Koneng"));
		posDropdown.add(new Option("Soka", "Soka"));
		posDropdown.add(new Option("Temelat", "Temelat"));
		posDropdown.add(new Option("Teras", "Teras"));
        break;
      case "Sektor 2":
        // Opsi untuk Lokasi 2
		posDropdown.add(new Option("Sektor 2", "Pilih Pos"));
        posDropdown.add(new Option("Gd. Handak Pendopo", "Gd. Handak Pendopo"));
        posDropdown.add(new Option("Gunung Megang", "Gunung Megang"));
		posDropdown.add(new Option("Ibul", "Ibul"));
		posDropdown.add(new Option("Lagan", "Lagan"));
		posDropdown.add(new Option("Pendopo", "Pendopo"));
		posDropdown.add(new Option("Pengabuan", "Pengabuan"));
		posDropdown.add(new Option("Rambutan", "Rambutan"));
        break;
      case "Sektor 3":
        // Opsi untuk Lokasi 3
        posDropdown.add(new Option("Sektor 3", "Pilih Pos"));
		posDropdown.add(new Option("Danau Cala", "Danau Cala"));
        posDropdown.add(new Option("Lica", "Lica"));
		posDropdown.add(new Option("Matra", "Matra"));
		posDropdown.add(new Option("Mess Pramuka Sec.", "Mess Pramuka Sec."));
		posDropdown.add(new Option("Meta", "Meta"));
        break;
	   case "Sektor 4":
        // Opsi untuk Lokasi 4
		posDropdown.add(new Option("Sektor 4", "Pilih Pos"));
        posDropdown.add(new Option("Mess Sepatu Roda", "Mess Sepatu Roda"));
        posDropdown.add(new Option("Palembang", "Palembang"));
		posDropdown.add(new Option("Pig Louncher", "Pig Louncher"));
		posDropdown.add(new Option("PLTG Borang", "PLTG Borang"));
		posDropdown.add(new Option("PLTG Indralaya", "PLTG Indralaya"));
		posDropdown.add(new Option("PLTG Kramasan", "PLTG Kramasan"));
		posDropdown.add(new Option("Serdang", "Serdang"));
        break;
	   case "Patroli":
        // Opsi untuk Lokasi 5
		posDropdown.add(new Option("Patroli", "Pilih Pos"));
		posDropdown.add(new Option("Flamboyan", "Flamboyan"));
        posDropdown.add(new Option("Gd. Handak Bungur", "Gd. Handak Bungur"));
		posDropdown.add(new Option("Gunung Kembang", "Gunung Kembang"));
		posDropdown.add(new Option("Jene", "Jene"));
		posDropdown.add(new Option("Koneng", "Koneng"));
		posDropdown.add(new Option("Soka", "Soka"));
		posDropdown.add(new Option("Temelat", "Temelat"));
		posDropdown.add(new Option("Teras", "Teras"));
		posDropdown.add(new Option("Gd. Handak Pendopo", "Gd. Handak Pendopo"));
        posDropdown.add(new Option("Gunung Megang", "Gunung Megang"));
		posDropdown.add(new Option("Ibul", "Ibul"));
		posDropdown.add(new Option("Lagan", "Lagan"));
		posDropdown.add(new Option("Pendopo", "Pendopo"));
		posDropdown.add(new Option("Pengabuan", "Pengabuan"));
		posDropdown.add(new Option("Rambutan", "Rambutan"));
		posDropdown.add(new Option("Danau Cala", "Danau Cala"));
        posDropdown.add(new Option("Lica", "Lica"));
		posDropdown.add(new Option("Matra", "Matra"));
		posDropdown.add(new Option("Mess Pramuka Sec.", "Mess Pramuka Sec."));
		posDropdown.add(new Option("Meta", "Meta"));
        posDropdown.add(new Option("Mess Sepatu Roda", "Mess Sepatu Roda"));
        posDropdown.add(new Option("Palembang", "Palembang"));
		posDropdown.add(new Option("Pig Louncher", "Pig Louncher"));
		posDropdown.add(new Option("PLTG Borang", "PLTG Borang"));
		posDropdown.add(new Option("PLTG Indralaya", "PLTG Indralaya"));
		posDropdown.add(new Option("PLTG Kramasan", "PLTG Kramasan"));
		posDropdown.add(new Option("Serdang", "Serdang"));
        break;
      default:
        // Tidak ada opsi yang dipilih
        break;
    }

    // Menampilkan div Pos jika Lokasi dipilih
    posGroup.style.display = selectedLokasi !== "" ? "block" : "none";
  }
</script>

          <div class="form-group">
            <label for="shift">Shift</label>
            <select class="form-control" name="shift" id="shift" required>
              <option value="" disabled selected hidden>Pilih Shift</option>
              <option value="Pagi">P</option>
              <option value="Malam">M</option>
              <option value="C">C</option>
              <option value="B">B</option>
              <option value="A">A</option>
              <option value="BC">BC</option>
              <option value="AC">AC</option>
              <option value="R">R</option>
              <option value="Admin">Admin</option>
            </select>
          </div>
          <div class="form-group">
            <label for="problem">Problem</label>
            <select class="form-control" name="problem" id="problem" required>
              <option value="" disabled selected hidden>Pilih Problem</option>
              <option value="PIN Telat Masuk">PIN Telat Masuk</option>
              <option value="PIN Geofence">PIN Geofence</option>
              <option value="PIN Pulang Awal">PIN Pulang Awal</option>
              <option value="Perubahan Schedule">Perubahan Schedule</option>
			  <option value="Aplikasi Error">Aplikasi Error</option>
			  <option value="Reset HP">Reset HP</option>
              <option value="Lain-Lain">Lain-Lain</option>
            </select>
          </div>
          <div class="form-group">
            <label for="message">Keterangan</label>
            <textarea class="form-control" name="message" id="exampleFormControlTextarea1" rows="3" required></textarea>
          </div>
          <input type="hidden" name="noWA" value="6281286011684">
          <button type="button" name="submit" class="btn btn-primary" onclick="submitForm()">Send</button>
        </div>
      </div>
    </form>
  </div>
</section>

<script>
  // Mendapatkan elemen input tanggal
  var tanggalInput = document.querySelector('input[name="tanggal"]');

  // Membuat fungsi untuk mengisi tanggal dan waktu saat ini
  function setDateTime() {
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0');
    var yyyy = today.getFullYear();
    var hh = String(today.getHours()).padStart(2, '0');
    var min = String(today.getMinutes()).padStart(2, '0');
    var ss = String(today.getSeconds()).padStart(2, '0');
    var formattedDateTime = dd + '-' + mm + '-' + yyyy + ' | ' + hh + ':' + min + ':' + ss;
    tanggalInput.value = formattedDateTime;
  }

  // Panggil fungsi setDateTime saat halaman dimuat
  setDateTime();

  // Atur interval untuk memperbarui waktu setiap detik
  setInterval(setDateTime, 1000);
</script>

<script>
  // Fungsi untuk mengirim data ke WhatsApp
  function sendToWhatsApp(tanggal, name, jabatan, lokasi, pos, shift, problem, message) {
    var messageText = "Tanggal : " + tanggal + "%0A" +
                     "Nama : " + name + "%0A" +
                     "Jabatan : " + jabatan + "%0A" +
                     "Lokasi : " + lokasi + "%0A" +
                     "Pos : " + pos + "%0A" +
                     "Shift : " + shift + "%0A" +
                     "Problem : " + problem + "%0A" +
                     "Keterangan : " + message;

var whatsappLink = "https://api.whatsapp.com/send?phone=&text=" + messageText;
    window.open(whatsappLink, "_blank");
  }

  // Fungsi untuk mengirim data ke Google Spreadsheet
  function sendToGoogleSpreadsheet(formData) {
    fetch("https://script.google.com/macros/s/AKfycbyP62KRPqTohsPf0SMqDhtmEGeHfyoxpazruLJGwpWDVIWZ_qTdCC9D_k2pJrbBWhvxOg/exec", {
      method: "POST",
      body: formData,
    })
      .then(function (response) {
        // Handle the response here (e.g., show a success message)
      })
      .catch(function (error) {
        // Handle errors (e.g., show an error message)
      });
  }

  // Fungsi untuk menangani pengiriman data
  function submitForm() {
  // Mendapatkan tanggal saat ini
  var tanggal = document.querySelector('input[name="tanggal"]').value;
  var name = document.querySelector('input[name="name"]').value;
  var jabatan = document.querySelector('input[name="jabatan"]').value;
  var lokasi = document.querySelector('select[name="lokasi"]').value;
  var pos = document.querySelector('select[name="pos"]').value;
  var shift = document.querySelector('select[name="shift"]').value;
  var problem = document.querySelector('select[name="problem"]').value;
  var message = document.querySelector('textarea[name="message"]').value;

  // Periksa apakah semua input yang diperlukan telah diisi
  if (tanggal && name && jabatan && lokasi && pos && shift && problem && message) {
    // Semua kolom yang diperlukan telah diisi, lanjutkan dengan mengirim data
    sendToWhatsApp(tanggal, name, jabatan, lokasi, pos, shift, problem, message);

    var formData = new FormData();
    formData.append('tanggal', tanggal);
    formData.append('name', name);
    formData.append('jabatan', jabatan);
    formData.append('lokasi', lokasi);
    formData.append('pos', pos);
    formData.append('shift', shift);
    formData.append('problem', problem);
    formData.append('message', message);

    sendToGoogleSpreadsheet(formData);
    // Tambahkan kode lain yang perlu dijalankan setelah mengirim data.
  } else {
    // Tampilkan pesan kesalahan atau tindakan yang sesuai jika input belum lengkap.
    alert("Harap isi semua kolom !!!");
  }
}

</script>

</body>
</html>
